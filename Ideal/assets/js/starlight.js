var user_configuration = { shape: "square", initial_size: "12px", final_size: "64px", expand_speed: "2s", fade_delay: "1s", fade_duration: "1s", colors: ["hsla(62, 50%,50%, 0.5)", "rgba(255,255,255,0.5)", "hsla(180, 72%, 52%, 0.5)"], frequency: 100, density: 5, keep_lit: false, rotation: true, coverage: 1, target_class: '.app', custom_svg: "" }; var advanced_configuration = { expand_transition_timing: "linear", expand_delay: "0s", rotation_transition_timing: "linear", rotation_angle: "360deg", rotation_duration: "1s", rotation_delay: "0s", fade_transition_timing: "linear", z_index: 0 }; function Star(width, height) { leftOffset = Math.round((width - width * user_configuration.coverage) / 2); topOffset = (height - Math.round(height * user_configuration.coverage)) / 2; this.xposition = Math.floor(Math.random() * width * user_configuration.coverage) + leftOffset; this.yposition = Math.floor(Math.random() * height * user_configuration.coverage) + topOffset } Star.prototype.create = function (parent_element, id) { var star = $('<div></div>'); var star_container = $('<div id=\"starlight-star' + id + '\"></div>'); star_container.append(star); star.css({ position: "absolute", top: "-50%", left: "-50%", width: "100%", height: "100%" }); star_container.css({ width: user_configuration.initial_size, height: user_configuration.initial_size, position: 'absolute', top: this.yposition, left: this.xposition, "z-index": advanced_configuration.z_index }); setTimeout(function () { star_container.css({ transition: "height " + user_configuration.expand_speed + " " + advanced_configuration.expand_transition_timing + " " + advanced_configuration.expand_delay + "," + "width " + user_configuration.expand_speed + " " + advanced_configuration.expand_transition_timing + " " + advanced_configuration.expand_delay, width: user_configuration.final_size, height: user_configuration.final_size }); if (user_configuration.rotation) { star.css({ transform: "rotate(" + advanced_configuration.rotation_angle + ")" }); var transition = advanced_configuration.rotation_duration + " " + advanced_configuration.rotation_transition_timing + " " + advanced_configuration.rotation_delay } if (!user_configuration.keep_lit) { star.css({ opacity: 0 }); if (transition) { transition += ",opacity " + user_configuration.fade_duration + " " + advanced_configuration.fade_transition_timing + " " + user_configuration.fade_delay } else { var transition = "opacity " + user_configuration.fade_duration + " " + advanced_configuration.fade_transition_timing + " " + user_configuration.fade_delay } setTimeout(function () { $("#starlight-star" + id).remove() }, css_time_to_milliseconds(user_configuration.fade_duration) + css_time_to_milliseconds(user_configuration.fade_delay)) } if (transition) { star.css({ transition: transition }) } }, 10); if (user_configuration.shape === 'circle') { star.css('border-radius', '50%') } if (user_configuration.custom_svg === '' || user_configuration.custom_svg === false) { star.css('background-color', user_configuration.colors[Math.floor(Math.random() * user_configuration.colors.length)]) } parent_element.append(star_container) }; $(document).ready(function () { var id = 0; $(user_configuration.target_class).each(function (index) { var currentElement = $(this); var width = currentElement.width(); var height = currentElement.height(); setInterval(function () { for (var i = 0; i < user_configuration.density; i++) { var newStar = new Star(width, height); newStar.create(currentElement, id); newStar = null; id++ } }, user_configuration.frequency) }) }); function css_time_to_milliseconds(time_string) { var num = parseFloat(time_string, 10), unit = time_string.match(/m?s/), milliseconds; if (unit) { unit = unit[0] } switch (unit) { case "s": milliseconds = num * 1000; break; case "ms": milliseconds = num; break; default: milliseconds = 0; break }return milliseconds }